{"version":3,"sources":["webpack:///./src/pages/game.vue","webpack:///./src/pages/game.vue?f987","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./src/pages/game.vue?400e","webpack:///./node_modules/core-js/modules/es.array.fill.js"],"names":["ctx","canvas","win","active","createMap","size","n","beginPath","i","j","rect","stroke","closePath","createTarget","x","y","arc","Math","PI","fillStyle","fill","createPlayer","getTarget","flag","player","target","window","removeEventListener","keypressHandler","value","console","log","directions","move","key","clearRect","ev","width","height","getContext","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","addEventListener","touchStartHandler","dataset","touchEndHandler","left","up","down","right","__exports__","toObject","toAbsoluteIndex","lengthOfArrayLike","module","exports","O","this","length","argumentsLength","arguments","index","undefined","end","endPos","$","addToUnscopables","proto"],"mappings":"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","file":"js/game.96c9a0f3.js","sourcesContent":["<template>\r\n    <div class=\"wrapper center\">\r\n        <canvas id=\"game\" ref=\"canvas\">Your browser do not support canvas</canvas>\r\n        <div class=\"win\" v-if=\"win\">You win !</div>\r\n        <div class=\"board\">\r\n            <div :class=\"['key', 'left', { 'stop': win }, {'active': active === 'a'}]\" ref=\"left\" data-key=\"a\"></div>\r\n            <div :class=\"['key', 'up', { 'stop': win }, {'active': active === 'w'}]\"  ref=\"up\" data-key=\"w\"></div>\r\n            <div :class=\"['key', 'down', { 'stop': win }, {'active': active === 's'}]\"  ref=\"down\" data-key=\"s\"></div>\r\n            <div :class=\"['key', 'right', { 'stop': win }, {'active': active === 'd'}]\"  ref=\"right\" data-key=\"d\"></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"@vue/reactivity\"\r\nimport { watch } from \"@vue/runtime-core\"\r\nconst canvas = ref(null)\r\nconst win = ref(false)\r\nconst active = ref('')\r\n\r\nlet ctx\r\nconst createMap = (ctx, size = 100, n = 3) => {\r\n    ctx.beginPath();\r\n    for (let i = 0; i < n * size; i += size) {\r\n        for (let j = 0; j < n * size; j += size) {\r\n            ctx.rect(i, j, size, size)\r\n        }\r\n    }\r\n    ctx.rect(0, 0, size * n, size * n)\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n}\r\nconst createTarget = (ctx, x, y, size = 30) => {\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, size, 0, 2 * Math.PI, true)\r\n    ctx.fillStyle = '#26C109';\r\n    ctx.fill();\r\n    ctx.closePath();\r\n}\r\nconst createPlayer = (ctx, x, y, size = 60) => {\r\n    ctx.beginPath();\r\n    ctx.rect(x, y, size, size)\r\n    ctx.fillStyle = '#D90814';\r\n    ctx.fill();\r\n    ctx.closePath();\r\n}\r\nconst getTarget = () => {\r\n    const flag = player.x - target.x === -30 && player.y - target.y === -30\r\n    if (flag) {\r\n        window.removeEventListener('keypress', keypressHandler)\r\n        win.value = true\r\n        console.log('you win')\r\n    }\r\n}\r\nconst player = {\r\n    x: 20,\r\n    y: 220\r\n}\r\nconst target = {\r\n    x: 250,\r\n    y: 50\r\n}\r\nconst directions = {\r\n    'w': () => {\r\n        player.y = player.y - 100 > 0 ? player.y - 100 : player.y\r\n    },\r\n    'a': () => {\r\n        player.x = player.x - 100 > 0 ? player.x - 100 : player.x\r\n    },\r\n    's': () => {\r\n        player.y = player.y + 100 < 300 ? player.y + 100 : player.y\r\n    },\r\n    'd': () => {\r\n        player.x = player.x + 100 < 300 ? player.x + 100 : player.x\r\n    }\r\n}\r\nconst move = (key) => {\r\n    ctx.clearRect(player.x - 5, player.y - 5, 80, 80)\r\n    directions[key]()\r\n    createPlayer(ctx, player.x, player.y)\r\n    getTarget()\r\n}\r\nconst keypressHandler = (ev) => {\r\n    move(ev.key)\r\n}\r\nwatch(canvas, () => {\r\n    canvas.value.width = '300'\r\n    canvas.value.height = '300'\r\n    ctx = canvas.value.getContext('2d')\r\n    ctx.shadowOffsetX = 2;\r\n    ctx.shadowOffsetY = 2;\r\n    ctx.shadowBlur = 5;\r\n    ctx.shadowColor = 'rgba(0,0,0,0.33)';\r\n    createMap(ctx)\r\n    createTarget(ctx, target.x, target.y)\r\n    createPlayer(ctx, player.x, player.y)\r\n    window.addEventListener('keypress', keypressHandler)\r\n})\r\nconst touchStartHandler = (target) => {\r\n    active.value = target.target.dataset.key\r\n    target.target.dataset.key && move(target.target.dataset.key)\r\n}\r\nconst touchEndHandler = () => {\r\n    active.value = ''\r\n}\r\nconst left = ref(null);\r\nconst up = ref(null);\r\nconst down = ref(null);\r\nconst right = ref(null);\r\nwatch(left, () => {\r\n    left.value.addEventListener('touchstart', touchStartHandler)\r\n    left.value.addEventListener('touchend', touchEndHandler)\r\n})\r\nwatch(up, () => {\r\n    up.value.addEventListener('touchstart', touchStartHandler)\r\n    up.value.addEventListener('touchend', touchEndHandler)\r\n})\r\nwatch(down, () => {\r\n    down.value.addEventListener('touchstart', touchStartHandler)\r\n    down.value.addEventListener('touchend', touchEndHandler)\r\n})\r\nwatch(right, () => {\r\n    right.value.addEventListener('touchstart', touchStartHandler)\r\n    right.value.addEventListener('touchend', touchEndHandler)\r\n})\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.wrapper {\r\n    margin-top: 2rem;\r\n    padding-bottom: 1rem;\r\n    flex-direction: column;\r\n    gap: 3rem 0;\r\n}\r\n/* #game {\r\n    border: 1px solid #000;\r\n} */\r\n.win {\r\n    position: absolute;\r\n    font-size: 2rem;\r\n    font-weight: bold;\r\n    color: rgb(95, 255, 47);\r\n}\r\n.board {\r\n    position: relative;\r\n    height: 10rem;\r\n    width: 10rem;\r\n    border-radius: 50%;\r\n    overflow: hidden;\r\n    --key-color: rgb(237, 194, 100);\r\n    box-shadow: .1rem .1rem .5rem rgba(0, 0, 0, 0.3);\r\n    background-color: rgba(0, 0, 0, 0.1);\r\n}\r\n.board::after {\r\n    content: \"\";\r\n    display: block;\r\n    height: 4rem;\r\n    width: 4rem;\r\n    position: absolute;\r\n    background: #fff;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    border-radius: 50%;\r\n    box-shadow: inset .1rem .1rem .5rem rgba(0, 0, 0, 0.3);\r\n}\r\n.board .key {\r\n    --width: 8.2rem;\r\n    position: absolute;\r\n    border-top: var(--width) solid transparent;\r\n    border-left: var(--width) solid var(--key-color);\r\n    transition: all .3s;\r\n}\r\n.board .key::after {\r\n    content: '';\r\n    display: block;\r\n    position: absolute;\r\n    width: 2rem;\r\n    height: 2rem;\r\n    background-image: linear-gradient(#fff 0%, #fff 100%),\r\n    linear-gradient(#fff 0%, #fff 100%);\r\n    background-position: 10% 50%, 50% 10%;\r\n    background-size: 1rem .2rem, .2rem 1rem;\r\n    background-repeat: no-repeat;\r\n    --ratio: 0.3;\r\n    bottom: calc(var(--width) * var(--ratio));\r\n    right: calc(var(--width) * (1 - var(--ratio)));\r\n    transform: translate(50%, 50%) rotateZ(-90deg);\r\n}\r\n.board .key.left {\r\n    left: -50%;\r\n    top: 50%;\r\n    transform: translateY(-50%) rotateZ(-135deg);\r\n}\r\n.board .key.right {\r\n    right: -50%;\r\n    top: 50%;\r\n    transform: translateY(-50%) rotateZ(45deg);\r\n}\r\n.board .key.up {\r\n    top: -50%;\r\n    left: 50%;\r\n    transform: translateX(-50%) rotateZ(-45deg);\r\n}\r\n.board .key.down {\r\n    bottom: -50%;\r\n    left: 50%;\r\n    transform: translateX(-50%) rotateZ(135deg);\r\n}\r\n.board .key.active {\r\n    border-left-color: rgb(255, 145, 0);\r\n}\r\n.board .key.active::after {\r\n    background-image: linear-gradient(#ff5 0%, #ff5 100%),\r\n    linear-gradient(#ff5 0%, #ff5 100%);\r\n}\r\n.stop {\r\n    pointer-events: none;\r\n}\r\n</style>","import script from \"./game.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./game.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./game.vue?vue&type=style&index=0&id=26ecaaee&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\qianDuan\\\\HomePage\\\\2nonnon.github.io\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-26ecaaee\"]])\n\nexport default __exports__","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./game.vue?vue&type=style&index=0&id=26ecaaee&scoped=true&lang=css\"","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n"],"sourceRoot":""}